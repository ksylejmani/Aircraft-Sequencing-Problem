// Generated by CoffeeScript 1.7.1
define(['jquery', 'modules/core/uri', 'modules/clean/ajax', 'modules/clean/gandalf_util', 'modules/clean/unity/versions'], function($j, URI, ajax, GandalfUtil, UnityVersions) {
  var DestinyLogger;
  DestinyLogger = {
    report_event: function(event_name, extra) {
      var log_data;
      if (extra == null) {
        extra = null;
      }
      log_data = {
        event_name: event_name,
        extra: JSON.stringify(extra || {}),
        local_ts: new Date().getTime(),
        server_path: window.location.pathname,
        session_id: Constants.sess_id,
        web_unity_version: UnityVersions.LATEST
      };
      ajax.WebRequest({
        url: URI({
          path: '/destiny_log'
        }),
        data: log_data
      });
      if (GandalfUtil.getGandalfRule("destiny-web-debug")) {
        return console.log(log_data);
      }
    }
  };
  return DestinyLogger;
});

//# sourceMappingURL=destiny_logger.map
